var Ae=Object.defineProperty;var Pe=(e,t,n)=>t in e?Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ie=(e,t,n)=>Pe(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function L(){}function ve(e){return e()}function ge(){return Object.create(null)}function U(e){e.forEach(ve)}function Me(e){return typeof e=="function"}function Ce(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Be(e){return Object.keys(e).length===0}function He(e,...t){if(e==null){for(const o of t)o(void 0);return L}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function je(e,t,n){e.$$.on_destroy.push(He(t,n))}function M(e,t){e.appendChild(t)}function X(e,t,n){e.insertBefore(t,n||null)}function K(e){e.parentNode&&e.parentNode.removeChild(e)}function D(e){return document.createElement(e)}function H(e){return document.createTextNode(e)}function oe(){return H(" ")}function ae(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function E(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function qe(e){return Array.from(e.childNodes)}function G(e,t){t=""+t,e.data!==t&&(e.data=t)}function ue(e,t,n,o){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,"")}function z(e,t,n){e.classList.toggle(t,!!n)}let J;function Y(e){J=e}function Re(){if(!J)throw new Error("Function called outside component initialization");return J}function We(e){Re().$$.on_mount.push(e)}const W=[],pe=[];let F=[];const he=[],Ee=Promise.resolve();let fe=!1;function Ne(){fe||(fe=!0,Ee.then(Oe))}function ze(){return Ne(),Ee}function de(e){F.push(e)}const le=new Set;let q=0;function Oe(){if(q!==0)return;const e=J;do{try{for(;q<W.length;){const t=W[q];q++,Y(t),Fe(t.$$)}}catch(t){throw W.length=0,q=0,t}for(Y(null),W.length=0,q=0;pe.length;)pe.pop()();for(let t=0;t<F.length;t+=1){const n=F[t];le.has(n)||(le.add(n),n())}F.length=0}while(W.length);for(;he.length;)he.pop()();fe=!1,le.clear(),Y(e)}function Fe(e){if(e.fragment!==null){e.update(),U(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(de)}}function Ue(e){const t=[],n=[];F.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),F=t}const Ke=new Set;function xe(e,t){e&&e.i&&(Ke.delete(e),e.i(t))}function me(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Ve(e,t){e.d(1),t.delete(e.key)}function Ye(e,t,n,o,r,s,u,w,g,i,f,b){let c=e.length,l=s.length,d=c;const x={};for(;d--;)x[e[d].key]=d;const C=[],k=new Map,h=new Map,T=[];for(d=l;d--;){const _=b(r,s,d),N=n(_);let a=u.get(N);a?T.push(()=>a.p(_,t)):(a=i(N,_),a.c()),k.set(N,C[d]=a),N in x&&h.set(N,Math.abs(d-x[N]))}const m=new Set,V=new Set;function j(_){xe(_,1),_.m(w,f),u.set(_.key,_),f=_.first,l--}for(;c&&l;){const _=C[l-1],N=e[c-1],a=_.key,y=N.key;_===N?(f=_.first,c--,l--):k.has(y)?!u.has(a)||m.has(a)?j(_):V.has(y)?c--:h.get(a)>h.get(y)?(V.add(a),j(_)):(m.add(y),c--):(g(N,u),c--)}for(;c--;){const _=e[c];k.has(_.key)||g(_,u)}for(;l;)j(C[l-1]);return U(T),C}function Je(e,t,n){const{fragment:o,after_update:r}=e.$$;o&&o.m(t,n),de(()=>{const s=e.$$.on_mount.map(ve).filter(Me);e.$$.on_destroy?e.$$.on_destroy.push(...s):U(s),e.$$.on_mount=[]}),r.forEach(de)}function Xe(e,t){const n=e.$$;n.fragment!==null&&(Ue(n.after_update),U(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ge(e,t){e.$$.dirty[0]===-1&&(W.push(e),Ne(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ze(e,t,n,o,r,s,u=null,w=[-1]){const g=J;Y(e);const i=e.$$={fragment:null,ctx:[],props:s,update:L,not_equal:r,bound:ge(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(g?g.$$.context:[])),callbacks:ge(),dirty:w,skip_bound:!1,root:t.target||g.$$.root};u&&u(i.root);let f=!1;if(i.ctx=n?n(e,t.props||{},(b,c,...l)=>{const d=l.length?l[0]:c;return i.ctx&&r(i.ctx[b],i.ctx[b]=d)&&(!i.skip_bound&&i.bound[b]&&i.bound[b](d),f&&Ge(e,b)),c}):[],i.update(),f=!0,U(i.before_update),i.fragment=o?o(i.ctx):!1,t.target){if(t.hydrate){const b=qe(t.target);i.fragment&&i.fragment.l(b),b.forEach(K)}else i.fragment&&i.fragment.c();t.intro&&xe(e.$$.fragment),Je(e,t.target,t.anchor),Oe()}Y(g)}class et{constructor(){ie(this,"$$");ie(this,"$$set")}$destroy(){Xe(this,1),this.$destroy=L}$on(t,n){if(!Me(n))return L;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const r=o.indexOf(n);r!==-1&&o.splice(r,1)}}$set(t){this.$$set&&!Be(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const tt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(tt);const R=[];function nt(e,t=L){let n;const o=new Set;function r(w){if(Ce(e,w)&&(e=w,n)){const g=!R.length;for(const i of o)i[1](),R.push(i,e);if(g){for(let i=0;i<R.length;i+=2)R[i][0](R[i+1]);R.length=0}}}function s(w){r(w(e))}function u(w,g=L){const i=[w,g];return o.add(i),o.size===1&&(n=t(r,s)||L),w(e),()=>{o.delete(i),o.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:u}}function ye(e,t,n){const o=e.slice();return o[22]=t[n],o}function ot(e){let t,n;return{c(){t=D("span"),n=H(e[6]),E(t,"class","countdown-pill today-countdown svelte-14gdxx9")},m(o,r){X(o,t,r),M(t,n)},p(o,r){r&64&&G(n,o[6])},d(o){o&&K(t)}}}function rt(e){let t,n;return{c(){t=D("span"),n=H(e[5]),E(t,"class","countdown-pill svelte-14gdxx9")},m(o,r){X(o,t,r),M(t,n)},p(o,r){r&32&&G(n,o[5])},d(o){o&&K(t)}}}function st(e){let t,n;return{c(){t=D("span"),n=H(e[4]),E(t,"class","countdown-pill svelte-14gdxx9")},m(o,r){X(o,t,r),M(t,n)},p(o,r){r&16&&G(n,o[4])},d(o){o&&K(t)}}}function we(e,t){let n,o,r,s=t[22].title+"",u,w,g,i,f,b=t[22].content+"",c,l,d,x;function C(T,m){if(m&128&&(g=null),g==null&&(g=!!/^Q\d$/.test(T[22].title)),g)return st;if(T[22].title==="This week")return rt;if(T[22].title==="Today")return ot}let k=C(t,-1),h=k&&k(t);return{key:e,first:null,c(){n=D("section"),o=D("h2"),r=D("span"),u=H(s),w=oe(),h&&h.c(),i=oe(),f=D("div"),l=oe(),E(o,"class","text-xl font-semibold text-gray-500 mb-3 flex items-center space-x-2"),E(f,"contenteditable","true"),E(f,"data-title",c=t[22].title),E(f,"class","flex-grow focus:outline-none text-gray-800 editor-area svelte-14gdxx9"),E(f,"placeholder","Start writing or type [] for a to-do..."),ue(f,"line-height","1.6"),z(f,"typing",t[2]),E(n,"class","w-full max-w-2xl px-4"),this.first=n},m(T,m){X(T,n,m),M(n,o),M(o,r),M(r,u),M(o,w),h&&h.m(o,null),M(n,i),M(n,f),f.innerHTML=b,M(n,l),d||(x=[ae(f,"input",t[11]),ae(f,"keydown",t[9])],d=!0)},p(T,m){t=T,m&128&&s!==(s=t[22].title+"")&&G(u,s),k===(k=C(t,m))&&h?h.p(t,m):(h&&h.d(1),h=k&&k(t),h&&(h.c(),h.m(o,null))),m&128&&b!==(b=t[22].content+"")&&(f.innerHTML=b),m&128&&c!==(c=t[22].title)&&E(f,"data-title",c),m&4&&z(f,"typing",t[2])},d(T){T&&K(n),h&&h.d(),d=!1,U(x)}}}function ct(e){let t,n=[],o=new Map,r,s,u,w,g,i,f=me(e[7]);const b=c=>c[22].title;for(let c=0;c<f.length;c+=1){let l=ye(e,f,c),d=b(l);o.set(d,n[c]=we(d,l))}return{c(){t=D("main");for(let c=0;c<n.length;c+=1)n[c].c();r=oe(),s=D("div"),u=H("Saved at "),w=H(e[0]),E(s,"class","fixed bottom-4 right-4 text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full shadow-sm transition-opacity duration-300"),z(s,"opacity-0",!e[1]),z(s,"opacity-100",e[1]),E(t,"role","main"),E(t,"class","flex flex-col items-center justify-start min-h-screen w-full py-16 space-y-12"),ue(t,"--theme-color",e[3])},m(c,l){X(c,t,l);for(let d=0;d<n.length;d+=1)n[d]&&n[d].m(t,null);M(t,r),M(t,s),M(s,u),M(s,w),g||(i=ae(t,"click",e[10]),g=!0)},p(c,[l]){l&2804&&(f=me(c[7]),n=Ye(n,l,b,1,c,f,o,t,Ve,we,r,ye)),l&1&&G(w,c[0]),l&2&&z(s,"opacity-0",!c[1]),l&2&&z(s,"opacity-100",c[1]),l&8&&ue(t,"--theme-color",c[3])},i:L,o:L,d(c){c&&K(t);for(let l=0;l<n.length;l+=1)n[l].d();g=!1,i()}}}function it(e,t){let n;return function(...r){const s=()=>{clearTimeout(n),e(...r)};clearTimeout(n),n=setTimeout(s,t)}}function _e(){const t=new Date().getMonth();return Math.floor(t/3)+1}function be(e,t){return`Q${e}`}function Se(e,t){const n=t*3;return new Date(e,n,1,0,0,0,0)-1}function Te(){const e=new Date,t=e.getDay(),n=t===0?0:7-t,o=new Date(e);return o.setDate(e.getDate()+n),o.setHours(24,0,0,0),o}function $e(){const e=new Date,t=new Date(e);return t.setHours(24,0,0,0),t}function ne(e){return`${Math.max(0,Math.ceil(e/864e5))}d`}function ke(e){if(e<=0)return"0s";const t=Math.max(0,Math.floor(e/1e3)),n=t%60,o=Math.floor(t/60),r=o%60,s=Math.floor(o/60);let u=[];return s>0&&u.push(`${s}h`),(r>0||s>0)&&u.push(`${r}m`),u.push(`${n}s`),u.join(" ")}function lt(e,t=.2){let n=0,o=0,r=0;return e.length===4?(n=parseInt(e[1]+e[1],16),o=parseInt(e[2]+e[2],16),r=parseInt(e[3]+e[3],16)):e.length===7&&(n=parseInt(e[1]+e[2],16),o=parseInt(e[3]+e[4],16),r=parseInt(e[5]+e[6],16)),`rgba(${n}, ${o}, ${r}, ${t})`}function at(e,t,n){let o;const r=typeof window<"u";let s="",u=!1;function w(a,y){const Q=nt(y);if(r)try{const A=localStorage.getItem(a);if(A)try{const p=JSON.parse(A);Array.isArray(p)&&p.every(v=>typeof v=="object"&&v!==null&&typeof v.title=="string"&&typeof v.content=="string")?(Q.set(p),console.log(`Loaded data from localStorage: ${a}`,p)):console.warn(`Invalid data in localStorage: ${a}. Using initial value.`)}catch(p){console.error(`Error parsing localStorage data: ${a}`,p)}else console.log(`No data found in localStorage: ${a}. Using initial value.`);const S=it(p=>{try{localStorage.setItem(a,JSON.stringify(p)),console.log(`Saved to localStorage: ${a}`),n(0,s=new Date().toLocaleTimeString()),n(1,u=!0),setTimeout(()=>{n(1,u=!1)},2e3)}catch(v){console.error(`Error saving to localStorage: ${a}`,v)}},500),$=Q.subscribe(S);window.addEventListener("unload",$)}catch(A){console.error("Error accessing localStorage",A)}return Q}const g=["#ef4444","#3b82f6","#22c55e","#eab308","#8b5cf6","#ec4899","#f97316"],i=new Date().getFullYear(),f=_e(),c=[{title:be(f),content:""},{title:"This week",content:""},{title:"Today",content:""}],l=w("notesAppData",c);je(e,l,a=>n(7,o=a));let d=!1,x,C=g[0],k="",h="",T="",m=null;function V(a){if(!r)return;const y=lt(a,.3);m||(m=document.createElement("style"),document.head.appendChild(m)),m.textContent=`
      ::selection { background-color: ${y} !important; }
      ::-moz-selection { background-color: ${y} !important; } 
    `}function j(){n(2,d=!0),clearTimeout(x),x=setTimeout(()=>{n(2,d=!1)},500)}function _(a){if(a.target.matches(".todo-checkbox")){let y;do y=g[Math.floor(Math.random()*g.length)];while(y===C&&g.length>1);n(3,C=y),V(C)}}async function N(a){var O,Z;if(!a.target.matches(".editor-area"))return;j();const y=a.target,Q=y.dataset.title,A=y.innerHTML,S=window.getSelection();if(!S||!S.rangeCount)return;const $=S.getRangeAt(0),p=$.startContainer,v=$.startOffset;let I=!1;if(p.nodeType===Node.TEXT_NODE){const P=p.textContent||"",B=P.slice(0,v);if(B.endsWith("[] ")&&(B.length===3||((O=p.previousSibling)==null?void 0:O.nodeName)==="BR"||p.parentNode===y)){const Ie=B.slice(0,-3),De=P.slice(v),ee=document.createElement("input");ee.type="checkbox",ee.className="todo-checkbox";const Le=document.createTextNode(Ie),re=document.createTextNode(" "+De),te=p.parentNode;if(te){te.replaceChild(re,p),te.insertBefore(ee,re),te.insertBefore(Le,ee);const Qe=y.innerHTML;l.update(se=>se.map(ce=>ce.title===Q?{...ce,content:Qe}:ce)),I=!0,await ze();try{$.setStart(re,1),$.collapse(!0),S.removeAllRanges(),S.addRange($)}catch(se){console.error("Error setting range after checkbox insertion:",se),y.focus(),document.execCommand("selectAll",!1,null),(Z=document.getSelection())==null||Z.collapseToEnd()}}else console.error("Parent node not found during checkbox replacement.")}}I||l.update(P=>P.map(B=>B.title===Q?{...B,content:A}:B))}return We(()=>{if(!r)return;V(C);function a(){o.forEach(I=>{const O=document.querySelector(`.editor-area[data-title="${I.title}"]`);O&&O.innerHTML!==I.content&&(console.log(`[onMount] Setting initial content for "${I.title}"`),O.innerHTML=I.content)});const S=new Date().getTime(),$=Se(i,f);n(4,k=ne($-S));const p=Te().getTime();n(5,h=ne(p-S));const v=$e().getTime();n(6,T=ke(v-S))}a();const y=setInterval(()=>{const S=new Date().getTime(),$=$e().getTime();n(6,T=ke($-S))},1e3),Q=setInterval(()=>{const S=new Date().getTime(),$=Se(i,f);n(4,k=ne($-S));const p=Te().getTime();n(5,h=ne(p-S))},6e4),A=setInterval(()=>{const S=new Date,$=_e();S.getFullYear();const p=be($),v=o,I=v.findIndex(O=>/^Q\d$/.test(O.title));if(I!==-1){const O=v[I].title;p!==O&&(console.log(`Quarter changed! Old: ${O}, New: ${p}`),l.update(Z=>Z.map(P=>P.title===O?{...P,title:p}:P)),a())}else console.warn("Could not find the Quarter note object in the store to check for updates.")},3600*1e3);return()=>{clearTimeout(x),clearInterval(A),clearInterval(y),clearInterval(Q),m&&m.parentNode&&m.parentNode.removeChild(m)}}),[s,u,d,C,k,h,T,o,l,j,_,N]}class ut extends et{constructor(t){super(),Ze(this,t,at,ct,Ce,{})}}new ut({target:document.getElementById("app")});
